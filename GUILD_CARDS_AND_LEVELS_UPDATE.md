# ✨ ОБНОВЛЕНИЕ: КРАСИВЫЕ КАРТОЧКИ И СИСТЕМА УРОВНЕЙ ГИЛЬДИЙ

## 📦 ЧТО БЫЛО ДОБАВЛЕНО

### 1️⃣ ВИЗУАЛЬНЫЕ КАРТОЧКИ ГИЛЬДИЙ 🖼️
- **Новая команда**: `!gcard [тег]` или `!gimage [тег]`
- **Где видна**: `!gstats`, `!ginfo` (автоматически добавляется красивое изображение)
- **Что показывает**:
  - Тег и название гильдии
  - Мощь, казна, члены
  - Боевая статистика (победы/поражения/апгрейды)
  - Уровень гильдии
  - Описание гильдии
  - Информация о лидере
- **Дизайн**: Темная тема (15,15,30), цветная рамка по цвету гильдии, красивый градиент

### 2️⃣ СИСТЕМА УРОВНЕЙ ГИЛЬДИЙ 📈
Гильдии теперь могут развиваться и получать опыт!

#### Новые команды:
- **`!glevel [тег]`** - Посмотреть уровень гильдии и прогресс
- **`!glevels`** - Полная информация о системе уровней

#### Как получить XP:
| Действие | XP | Команда |
|----------|-----|---------|
| 🏆 Победа в войне | +500 | !gwar |
| 💀 Поражение в войне | +100 | !gwar |
| 💰 Пополнение казны | +1 за 100 монет | !gdeposit |
| 💝 Пожертвование в казну | +1 за 100 монет | !gtribute |
| 🔧 Покупка апгрейда | +200 | !gupgrade |

#### Формула уровня:
```
XP для повышения = 1000 + (уровень × 500)
Уровень 1→2: 1500 XP
Уровень 10→11: 6000 XP
```

#### Бонусы за каждый уровень:
- 👥 +5 слотов для членов
- 💰 +2% бонус к казне
- 💪 +100 к мощи гильдии

### 3️⃣ ИНТЕГРАЦИЯ С СУЩЕСТВУЮЩИМИ КОМАНДАМИ

#### !gstats [тег]
Теперь отправляет:
- Текстовую карточку со статистикой
- **Красивое PNG-изображение** с визуализацией всех данных

#### !ginfo [тег]
- Добавлено изображение карточки гильдии
- Еще более красивое отображение информации

#### !ghelp
- Добавлены новые команды в справку
- `!gcard` - для просмотра карточки
- `!glevel` - для просмотра уровня
- `!glevels` - информация о уровнях

---

## 🔧 ТЕХНИЧЕСКИЕ ДЕТАЛИ

### Файлы, которые были изменены:
1. **guilds.py** (+400 строк)
   - Новые функции: `calc_guild_level()`, `add_guild_xp()`
   - Новые команды: `glevel`, `glevels`, `gcard`
   - Интеграция изображений в `gstats`, `ginfo`
   - Добавление XP в `gwar`, `gdeposit`, `gupgrade`

2. **requirements.txt**
   - Добавлен `Pillow` для создания изображений PNG
   - Добавлен `requests` для работы с сетевыми запросами

3. **GUILD_LEVELS_GUIDE.md** ✨ НОВЫЙ
   - Полная инструкция по системе уровней

### Инициализация:
- Новые гильдии автоматически создаются с `level: 1`, `level_xp: 0`
- Старые гильдии автоматически получают эти поля при первом использовании

---

## 🎨 КАК ЭТО ВЫГЛЯДИТ

### Карточка гильдии (PNG 800x600):
```
╔════════════════════════════════════════════════════════════╗
║  [SP] Sunshine Paradise                                    ║
║  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ║
║                    📈 Уровень 10                           ║
║                                                             ║
║  📊 СТАТИСТИКА          🏆 БОЕВАЯ СТАТИСТИКА             ║
║  💪 Мощь:     52,400    🥇 Побед:      25                 ║
║  💰 Казна:    250,000   ☠️  Поражений:  8                  ║
║  👥 Члены:    15/25     🔧 Апгрейдов:  5                  ║
║  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  ║
║                    ИНФОРМАЦИЯ                              ║
║  "🌸 Лучшая гильдия сервера!"                            ║
║  👑 Лидер: 012345678                                       ║
║                                                             ║
║           🌸 Sunshine Paradise                             ║
╚════════════════════════════════════════════════════════════╝
```

### Команда !glevel:
```
📈 Уровень Гильдии

Гильдия: [SP] Sunshine Paradise
_________________________________________________

📊 Уровень: 10
⭐ Опыт: 3,250/6,000
[████████████  ] 54%
_________________________________________________

💪 Мощь: +1,000
👥 Доп. слотов: +50
💰 Вознагр. казны: +20%
_________________________________________________

🎯 Общая мощь: 52,400
```

---

## 🚀 ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ

### Для лидера гильдии:
```
1. !glevel          → Посмотреть прогресс
2. !gstats          → Красивая карточка с изображением
3. !gcard           → Отдельное изображение карточки
4. !gupgrade slot_1 → Купить апгрейд (даст +200 XP)
5. !glevels         → Узнать как получить XP быстрее
```

### Для членов гильдии:
```
1. !gdeposit 10000  → Пополнить казну (даст +100 XP за каждые 1000)
2. !gtribute 5000   → Пожертвовать (даст +50 XP)
3. !glevel          → Посмотреть результаты
4. !gcard           → Показать друзьям красивую карточку
```

### Для конкурентов:
```
!glevel ENEMY       → Посмотреть уровень и силу противника
!gcard ENEMY        → Рассмотреть все их статы визуально
```

---

## ✅ ПОЛНЫЙ ЧЕКЛИСТ РЕАЛИЗАЦИИ

- ✅ Визуальные карточки гильдий (PNG с PIL)
- ✅ Система оценки уровня с XP
- ✅ Автоматическое повышение уровня
- ✅ Бонусы за уровень (мощь, слоты, казна)
- ✅ Множественные источники XP
- ✅ Интеграция в существующие команды (!gstats, !ginfo)
- ✅ Новые команды (!glevel, !glevels, !gcard)
- ✅ Инициализация уровней в новых гильдиях
- ✅ Полная документация и примеры
- ✅ Все файлы синтаксически верны ✓

---

## 🎯 СЛЕДУЮЩИЕ ШАГИ (ОПЦИОНАЛЬНО)

### Возможные улучшения:
1. **Ранги в гильдии** - дополнительные XP за управление
2. **Квесты гильдии** - события с наградами XP
3. **Prestige система** - перезагрузка уровня с бонусами
4. **Лидерборд уровней** - топ гильдий по уровню
5. **Гильдийские эмодзи** - заработка за уровень
6. **Достижения гильдии** - специальные события (первая война, 100k казна и т.д.)

---

## 📞 КОМАНДЫ ДЛЯ СПРАВКИ

```
!ghelp          – Полная справка (включает новые команды)
!glevel [тег]   – Уровень гильдии
!glevels        – Информация о системе уровней
!gcard [тег]    – Красивая карточка гильдии (PNG)
!gstats [тег]   – Статистика гильдии (с изображением)
!ginfo [тег]    – Информация о гильдии (с изображением)
```

---

**ВСЕ ГОТОВО К ИСПОЛЬЗОВАНИЮ! 🌸✨**
